{% extends "base.html" %}

{% block lab %}Лабораторная работа 8{% endblock %}

{% block main %}
    <h1>Мои статьи</h1>
    
    <a href="/lab8/create" style="display: inline-block; margin-bottom: 20px; padding: 10px 15px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">
        + Создать новую статью
    </a>
    
    {% if articles %}
        <div style="display: grid; gap: 20px;">
            {% for article in articles %}
                <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
                    <h3>{{ article.title }}</h3>
                    <p>{{ article.article_text[:200] }}{% if article.article_text|length > 200 %}...{% endif %}</p>
                    <div style="margin-top: 10px; font-size: 14px; color: #666;">
                        <span>Лайков: {{ article.likes }}</span>
                        <span style="margin-left: 15px;">Избранная: {{ "Да" if article.is_favorite else "Нет" }}</span>
                        <span style="margin-left: 15px;">Публичная: {{ "Да" if article.is_public else "Нет" }}</span>
                    </div>
                    <div style="margin-top: 15px;">
                        <a href="/lab8/edit/{{ article.id }}" style="color: #007bff; text-decoration: none; margin-right: 10px;">Редактировать</a>
                        <a href="/lab8/delete/{{ article.id }}" style="color: #dc3545; text-decoration: none;" onclick="return confirm('Вы уверены, что хотите удалить эту статью?')">Удалить</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>У вас пока нет статей. <a href="/lab8/create">Создайте первую!</a></p>
    {% endif %}
{% endblock %}