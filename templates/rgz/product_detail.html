{% extends "rgz/base.html" %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="product-detail">
    <div class="product-main">
        <div class="product-image">
            {% if product.image_url %}
                <img src="{{ url_for('static', filename='rgz/images/' + product.image_url) }}" alt="{{ product.name }}">
            {% else %}
                <div class="no-image">Нет изображения</div>
            {% endif %}
        </div>
        
        <div class="product-info">
            <h1>{{ product.name }}</h1>
            <p class="category">Категория: {{ product.category_name }}</p>
            <p class="price">{{ "%.2f"|format(product.price) }} руб.</p>
            <p class="stock">В наличии: {{ product.stock }} шт.</p>
            
            <div class="description">
                <h3>Описание:</h3>
                <p>{{ product.description }}</p>
            </div>
            
            {% if session.login %}
            <form action="{{ url_for('rgz.add_to_cart', product_id=product.id) }}" method="POST">
                <div class="quantity-selector">
                    <label for="quantity">Количество:</label>
                    <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ product.stock }}">
                </div>
                <button type="submit" class="btn btn-primary">Добавить в корзину</button>
            </form>
            {% else %}
            <p><a href="{{ url_for('rgz.login') }}">Авторизуйтесь</a>, чтобы добавить товар в корзину</p>
            {% endif %}
        </div>
    </div>
    
    <div class="back-link">
        <a href="{{ url_for('rgz.products') }}" class="btn">Вернуться к каталогу</a>
    </div>
</div>
{% endblock %}