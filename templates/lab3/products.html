{% extends "base.html" %}

{% block lab %}Лабораторная работа 3{% endblock %}

{% block main %}
<h1>Поиск смартфонов</h1>

<form method="GET" action="/lab3/products">
    <div style="display: flex; gap: 20px; margin-bottom: 20px; align-items: end;">
        <div>
            <label for="min_price">Минимальная цена:</label>
            <input type="number" id="min_price" name="min_price" 
                   placeholder="{{ global_min_price }}"
                   value="{{ min_price or '' }}"
                   min="0" style="width: 150px;">
        </div>
        
        <div>
            <label for="max_price">Максимальная цена:</label>
            <input type="number" id="max_price" name="max_price" 
                   placeholder="{{ global_max_price }}"
                   value="{{ max_price or '' }}"
                   min="0" style="width: 150px;">
        </div>
        
        <div>
            <button type="submit" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer;">
                Искать
            </button>
        </div>
        
        <div>
            <a href="/lab3/products/clear" style="background-color: #f44336; color: white; padding: 10px 20px; text-decoration: none; display: inline-block;">
                Сброс
            </a>
        </div>
    </div>
</form>

<div style="margin-bottom: 20px;">
    <strong>Найдено товаров: {{ products_count }}</strong>
</div>

{% if products %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
        {% for product in products %}
        <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px; background-color: #f9f9f9;">
            <h3 style="margin-top: 0; color: #333;">{{ product.name }}</h3>
            <div style="color: #e44d26; font-size: 1.2em; font-weight: bold;">
                {{ product.price }} руб.
            </div>
            <div style="margin-top: 10px;">
                <strong>Бренд:</strong> {{ product.brand }}<br>
                <strong>Цвет:</strong> {{ product.color }}<br>
                <strong>Вес:</strong> {{ product.weight }} г
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div style="text-align: center; padding: 40px; background-color: #f8f9fa; border-radius: 8px;">
        <h3 style="color: #666;">Не найдено ни одного товара</h3>
        <p>Попробуйте изменить параметры поиска</p>
    </div>
{% endif %}

<div style="margin-top: 30px; padding: 15px; background-color: #e7f3ff; border-radius: 8px;">
    <h4>Информация о диапазоне цен:</h4>
    <p>Самый дешевый товар: <strong>{{ global_min_price }} руб.</strong></p>
    <p>Самый дорогой товар: <strong>{{ global_max_price }} руб.</strong></p>
</div>
{% endblock %}